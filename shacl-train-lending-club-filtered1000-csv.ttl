@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix schema: <http://schema.org/> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix ex: <http://example.org/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix fibo_loan: <https://spec.edmcouncil.org/fibo/ontology/LOAN/LoansGeneral/LoanApplications/> .
@prefix wiki: <https://www.wikidata.org/wiki/> .
@prefix fibo: <https://spec.edmcouncil.org/fibo/ontology/> .
@prefix local: <http://localhost:3333/> .

local:0 a fibo_loan:LoanApplication;
ex:isVerified "Not Verified".
fibo:Requester a rdfs:Class, sh:NodeShape ;
	sh:targetClass <fibo:FND/Arrangements/Reporting/Requester> ;
	sh:name "Applicant" ;
	sh:property [
		sh:path <https://spec.edmcouncil.org/fibo/ontology/FND/Arrangements/Documents/hasRecord> ;
		sh:minCount 3 ;
		sh:maxCount 3 ;
		sh:property [
			sh:path <fibo_loan:PublicRecordCategory-RealEstate> ;
			sh:name "Home ownership type" ;
			sh:minCount 1 ;
			sh:maxCount 1 ;
			sh:datatype xsd:string ;
			sh:in (
				"MORTGAGE"
				"OWN"
				"RENT"
			)
				];
		sh:property [
			sh:path fibo_loan:IndividualPersonCreditRating ;
			sh:minCount 1 ;
			sh:maxCount 1 ;
			sh:property [
				sh:path <fibo:BP/SecuritiesIssuance/AgencyMBSIssuance/minimumRating> ;
				sh:name "Minimum fico value" ;
				sh:minCount 1 ;
				sh:maxCount 1 ;
				sh:property [
								sh:path owl:hasValue ;
								sh:minCount 1 ;
								sh:maxCount 1 ;
							sh:datatype xsd:int ;
							sh:minInclusive 300 ;
							sh:maxInclusive 850 ;];

				];

			sh:property [
			sh:path <fibo:FND/Arrangements/Ratings/RatingScore> ;
			sh:name "Maximum fico value" ;
			sh:minCount 1 ;
			sh:maxCount 1 ;
			sh:property [
				sh:path owl:hasValue ;
				sh:minCount 1 ;
				sh:maxCount 1 ;
				sh:datatype xsd:int ;
				sh:minInclusive 300 ;
				sh:maxInclusive 850 ;
				];

		];
			];
	], [
		sh:path <fibo:FND/Organizations/FormalOrganizations/Employment> ;
		sh:name "Total employment duration in years" ;
		sh:minCount 1 ;
		sh:maxCount 1 ;
		sh:property [
			sh:path owl:hasValue ;
			sh:minCount 1 ;
			sh:maxCount 1 ;
			sh:datatype xsd:int ;
			sh:minInclusive 0 ;
			];

	],  [
		sh:path wiki:319608 ;
		sh:name "Address state" ;
		sh:minCount 1 ;
		sh:maxCount 1 ;
		sh:datatype xsd:string ;

	], [
		sh:path fibo_loan:PublicRecord ;
		sh:name "Number of public records" ;
		sh:minCount 1 ;
		sh:maxCount 1 ;
		sh:property [
			sh:path owl:hasValue ;
			sh:minCount 1 ;
			sh:maxCount 1 ;
			sh:datatype xsd:int ;
			sh:minInclusive 0 ;
			];

	], [
		sh:path fibo_loan:LoanApplication;
		sh:name "Application" ;
		sh:minCount 1 ;
		sh:nodeKind fibo_loan:LoanApplication ;
		sh:class fibo_loan:LoanApplication ;
	] .

fibo_loan:LoanApplication a rdfs:Class, sh:NodeShape ;
	sh:targetClass fibo_loan:LoanApplication ;
	sh:name "Loan application" ;
	sh:property [
		sh:path owl:hasKey;
		sh:name "Loan ID" ; #TODO
		sh:minCount 1 ;
		sh:maxCount 1 ;
		], [
		sh:path <https://spec.edmcouncil.org/fibo/ontology/FND/DatesAndTimes/FinancialDates/hasDateReceived> ;
		sh:name "Loan issue date" ;
		sh:minCount 1 ;
		sh:maxCount 1 ;
	], [
		sh:path local:verificationStatus  ;
		sh:name "Verification status" ;
		sh:minCount 1 ;
		sh:maxCount 1 ;
	], [
		sh:path fibo_loan:LoanApplicationStatus ;
		sh:name "Loan approval status" ;
		sh:minCount 1 ;
		sh:maxCount 1 ;
	], [
		sh:path local:isOfType ;
		sh:name "Loan application type" ;
		sh:minCount 1 ;
		sh:maxCount 1 ;
	], [
		sh:path <https://spec.edmcouncil.org/fibo/ontologyFND/Agreements/Contracts/hasContractDuration> ;
		sh:name "Loan term" ;
		sh:minCount 1 ;
		sh:maxCount 1 ;

	], [
		sh:path <https://spec.edmcouncil.org/fibo/ontologyFBC/DebtAndEquities/Debt/hasInterestRate> ;
		sh:name "Loan interest rate" ;
		sh:minCount 1 ;
		sh:maxCount 1 ;
	], [
		sh:path <https://spec.edmcouncil.org/fibo/ontologyFND/Arrangements/Ratings/RatingScore> ;
		sh:name "Loan sub-grade" ;
		sh:minCount 1 ;
		sh:maxCount 1 ;
			sh:in (
			local:A1
			local:A2
			local:A3
			local:A4
			local:A5
			local:B1
			local:B2
			local:B3
			local:B4
			local:B5
			local:C1
			local:C2
			local:C3
			local:C4
			local:C5
			local:D1
			local:D2
			local:D3
			local:D4
			local:D5
			local:E1
			local:E2
			local:E3
			local:E4
			local:E5
			local:F1
			local:F2
			local:F3
			local:F4
			local:F5
			local:G1
			local:G2
			local:G3
			local:G4
			local:G5
		) ;

	] .

<fibo:LOAN/RealEstateLoans/HomeMortgageDisclosureActCoveredMortgages/UniversalLoanIdentifier> a rdfs:Class , sh:NodeShape ;
	 sh:property [ sh:path owl:hasValue;
									sh:minCount 1 ;
									sh:maxCount 1 ;
									sh:datatype xsd:int;
								  ].
<https://spec.edmcouncil.org/fibo/ontology/FND/DatesAndTimes/FinancialDates/hasDateReceived> a rdfs:Class , sh:NodeShape ;
		sh:name "Loan issue date";
		sh:property [
						sh:path <wiki:Q26726966>;
						sh:minCount 1 ;
						sh:maxCount 1 ;
					].
<wiki:Q26726966> a rdfs:Class ,sh:NodeShape;
						sh:property [
										sh:path owl:hasValue ;
										sh:minCount 1 ;
										sh:maxCount 1 ;
									 	sh:datatype xsd:dateTime] .
<fibo:LOAN/LoansGeneral/LoanApplications/UnderwritingDecision> a rdfs:Class , sh:NodeShape  ;
		sh:name "Verification status" ;
		sh:property [
						sh:path owl:hasValue ;
						sh:minCount 1 ;
						sh:maxCount 1 ;
					 	sh:datatype xsd:string ;
						sh:in (
							"Not Verified"
							"Source Verified"
							"Verified"
						) ;].
fibo_loan:LoanApplicationStatus a rdfs:Class , sh:NodeShape ;
		sh:name "Loan approval status" ;
		sh:property  [sh:path owl:hasValue ;
					  sh:minCount 1 ;
					  sh:maxCount 1 ;
					 sh:datatype xsd:boolean ;].

local:loanApplicationType a rdfs:Class , sh:NodeShape ;
		sh:name "Loan application type" ;
		sh:property [
			sh:path owl:hasValue ;
					sh:minCount 1 ;
					sh:maxCount 1 ;
					sh:datatype xsd:string ;
					sh:in (
						"Individual"
						"Joint App"
					) ;
					].

<https://spec.edmcouncil.org/fibo/ontologyFND/Agreements/Contracts/hasContractDuration> a rdfs:Class , sh:NodeShape ;
		sh:name "Loan term" ;
		sh:property [
			sh:path owl:hasValue ;
			sh:minCount 1 ;
			sh:maxCount 1 ;
			sh:datatype xsd:int ;
			sh:minInclusive 1 ;
			].

<https://spec.edmcouncil.org/fibo/ontologyFBC/DebtAndEquities/Debt/hasInterestRate> a rdfs:Class , sh:NodeShape ;
		sh:name "Loan interest rate" ;
		sh:property [
			sh:path owl:hasValue ;
			sh:minCount 1 ;
			sh:maxCount 1 ;
			sh:datatype xsd:double ;
			sh:minInclusive "0.0"^^xsd:double ;
			].


